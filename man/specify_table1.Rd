% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/specify_table1.R
\name{specify_table1}
\alias{specify_table1}
\title{Create Table 1: Descriptive Statistics Summary}
\usage{
specify_table1(
  data,
  vars,
  labels = NULL,
  digits = 2,
  n_pct_order = c("n_pct", "pct_n"),
  center_fun = mean,
  spread_fun = sd,
  group = NULL,
  subgroups = NULL,
  include_all = NULL,
  all_label = "All",
  var_types = NULL,
  empty_subgroup_handling = c("na", "zero", "skip")
)
}
\arguments{
\item{data}{Data frame or data table with variables of interest}

\item{vars}{Character vector of variable names, a data frame with 2 columns,
a nested list structure, or a YAML string/file:
\itemize{
\item Character vector: Simple list of variable names
\item Data frame: Column 1 = variable names, Column 2 = labels
\item Nested list: Structured format with subheaders and variable-level overrides.
See examples below.
}

Nested list format:
\preformatted{
  list(
    "Table Title" = list(
      "Subheader 1" = list(
        var1 = "Label 1",
        var2 = "Label 2",
        var3 = list(var = "var3", label = "Label 3", 
                   center_fun = median, spread_fun = IQR),
        var4 = list(var = "var4", label = "Label 4",
                   levels = list("Level 1" = "value1", "Level 2" = "value2"),
                   combine_remaining = TRUE, other_label = "Other")
      ),
      "Subheader 2" = list(...)
    )
  )
  }

YAML format (recommended for readability):
\preformatted{
  "Table Title":
    "Subheader 1":
      var1: "Label 1"
      var2: "Label 2"
      var3:
        var: "var3"
        label: "Label 3"
        center_fun: "median"
        spread_fun: "IQR"
      var4:
        var: "var4"
        label: "Label 4"
        levels:
          "Level 1": "value1"
          "Level 2": "value2"
        combine_remaining: true
        other_label: "Other"
    "Subheader 2":
      var5: "Label 5"
  }

YAML can be provided as a string or file path. See \code{\link{parse_yaml_varlist}}
for details.}

\item{labels}{Optional named vector or data frame mapping variable names to labels.
If \code{vars} is a 2-column data frame, labels are taken from column 2.}

\item{digits}{Number of digits for continuous variables (default = 2)}

\item{n_pct_order}{Order for categorical stats: "n_pct" (default) or "pct_n"}

\item{center_fun}{Function for center statistic of continuous variables (default = \code{mean}).
Other options: \code{median}, or custom function.}

\item{spread_fun}{Function for spread statistic of continuous variables (default = \code{sd}).
Other options: \code{IQR} (for interquartile range), or custom function.}

\item{group}{Optional character string name of grouping variable. Creates columns
for each level of the factor variable.}

\item{subgroups}{Optional named list defining custom subgroups/columns. Each element can be:
\itemize{
\item A character string naming a grouping variable (for mutually exclusive groups)
\item A function that filters the data (returns logical vector)
\item A list with 'filter' (function) and optional 'label' (character)
}}

\item{include_all}{Logical, whether to include a column for all observations
(default = TRUE if no group or subgroups specified, FALSE otherwise)}

\item{all_label}{Label for the "all" column (default = "All")}

\item{var_types}{Optional named character vector to override automatic type detection.
Values should be "continuous", "binary", or "categorical".}

\item{empty_subgroup_handling}{How to handle empty subgroups:
\itemize{
\item "na" - Return NA for statistics (default)
\item "zero" - Return "0" or "0 (0)" for statistics
\item "skip" - Skip empty subgroups (not recommended for column alignment)
}}
}
\value{
Returns Table 1 as a data frame with columns:
\itemize{
\item varname: Variable name/label
\item One or more columns containing statistics (one per subgroup/group level)
\item n: Sample size (for first column)
}
If multiple columns are created, the result includes an attribute "sample_sizes"
with sample sizes for each column.
}
\description{
Creates a Table 1 summary table that provides descriptive statistics
for variables in a data frame. Table 1 typically contains baseline
characteristics of study participants.
}
\details{
The function automatically detects variable types and formats them appropriately:
\itemize{
\item Continuous variables: Center (Spread) - default is Mean (SD)
\item Binary variables: n (pct) by default
\item Categorical variables: n (pct) for each level (auto-expanded or user-specified)
}

For categorical variables, you can specify which levels to include and their labels
using the \code{levels} parameter in nested list or YAML format. This eliminates the
need to manually create derived binary variables.

For factor variables specified without a \code{levels} specification, the function
automatically creates a subheader row with the variable label, followed by indented
rows for each factor level (indented with 2 spaces). This provides a clear hierarchical
structure in the table output.

The function supports both single-column and multi-column tables. Use the \code{group}
parameter to create columns from a factor variable, or \code{subgroups} to define
custom columns (including non-mutually exclusive subsets).
}
\examples{
# Create test data
data <- data.frame(
  age = rnorm(100, 50, 10),
  sex = factor(rep(c("M", "F"), 50)),
  treated = rep(c(TRUE, FALSE), 50),
  score = runif(100, 0, 100)
)

# Simple usage with variable names (single column)
table1 <- specify_table1(data, vars = c("age", "sex", "treated", "score"))
print(table1)

# With custom labels
varlist <- data.frame(
  var = c("age", "sex", "treated", "score"),
  label = c("Age (years)", "Sex", "Treated", "Score")
)
table1 <- specify_table1(data, vars = varlist)

# Multi-column table by grouping variable
data$group <- rep(c("A", "B"), 50)
table1_multi <- specify_table1(
  data,
  vars = c("age", "sex", "treated"),
  group = "group"
)

# Multi-column table with custom subgroups
table1_multi <- specify_table1(
  data,
  vars = c("age", "sex", "treated"),
  subgroups = list(
    "Treated" = function(d) d$treated == TRUE,
    "Untreated" = function(d) d$treated == FALSE
  ),
  include_all = TRUE
)

# Factor variables automatically create subheader + indented levels
data$race <- factor(rep(c("White", "Black", "Asian"), c(30, 20, 50)))
table1_factor <- specify_table1(data, vars = c("age", "race"))
# Output: "race" as subheader, then "  White", "  Black", "  Asian" as indented rows

}
