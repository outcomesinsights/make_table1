% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/specify_table1_multi.R
\name{specify_table1_multi}
\alias{specify_table1_multi}
\title{Create Multi-Column Table 1 for Multiple Subgroups}
\usage{
specify_table1_multi(
  data,
  vars,
  subgroups = NULL,
  include_all = TRUE,
  all_label = "All",
  labels = NULL,
  digits = 2,
  center_fun = mean,
  spread_fun = sd,
  var_types = NULL,
  empty_subgroup_handling = c("na", "zero", "skip")
)
}
\arguments{
\item{data}{Data frame with variables of interest}

\item{vars}{Character vector of variable names, a 2-column data frame,
a nested list structure, or a YAML string/file (see \code{\link{specify_table1}})}

\item{subgroups}{Named list defining subgroups. Each element can be:
\itemize{
\item A character string naming a grouping variable (for mutually exclusive groups)
\item A function that filters the data (returns logical vector)
\item A list with 'filter' (function) and optional 'label' (character)
}}

\item{include_all}{Logical, whether to include a column for all observations
(default = TRUE)}

\item{all_label}{Label for the "all" column (default = "All")}

\item{labels}{Optional named vector mapping variable names to labels}

\item{digits}{Number of digits for continuous variables (default = 2)}

\item{center_fun}{Function for center statistic of continuous variables (default = \code{mean})}

\item{spread_fun}{Function for spread statistic of continuous variables (default = \code{sd})}

\item{var_types}{Optional named character vector to override automatic type detection}

\item{empty_subgroup_handling}{How to handle empty subgroups:
\itemize{
\item "na" - Return NA for statistics (default)
\item "zero" - Return "0" or "0 (0)" for statistics
\item "skip" - Skip empty subgroups (not recommended for column alignment)
}}
}
\value{
Returns a data frame with columns:
\itemize{
\item varname: Variable name/label
\item One column per subgroup containing the statistics
\item n: Sample size (only for first column if include_all=TRUE)
}
}
\description{
Creates a multi-column Table 1 that combines statistics from multiple
subgroups. Useful for comparing characteristics across different groups
or subsets of the data.
}
\details{
Subgroups can be:
\itemize{
\item Defined by a grouping variable (mutually exclusive groups)
\item Defined by custom filters (non-mutually exclusive subsets)
\item A combination of both
}
}
\examples{
# Create test data
data <- data.frame(
  age = rnorm(200, 50, 10),
  sex = factor(rep(c("M", "F"), 100)),
  treated = rep(c(TRUE, FALSE), 100),
  group = rep(c("A", "B", "C", "D"), 50)
)

# Multi-column table by grouping variable
table1_multi <- specify_table1_multi(
  data,
  vars = c("age", "sex", "treated"),
  subgroups = list(Group = "group")
)

# Multi-column table with custom filters
table1_multi <- specify_table1_multi(
  data,
  vars = c("age", "sex", "treated"),
  subgroups = list(
    "Treated" = function(d) d$treated == TRUE,
    "Untreated" = function(d) d$treated == FALSE,
    "Male" = function(d) d$sex == "M"
  )
)

# Combine grouping variable and custom filters
table1_multi <- specify_table1_multi(
  data,
  vars = c("age", "sex", "treated"),
  subgroups = list(
    "All Treated" = function(d) d$treated == TRUE,
    "Group A" = function(d) d$group == "A"
  ),
  include_all = TRUE
)

}
