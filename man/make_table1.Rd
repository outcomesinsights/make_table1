% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_table1.R
\name{make_table1}
\alias{make_table1}
\title{Create Table 1: Descriptive Statistics Summary}
\usage{
make_table1(
  data,
  vars,
  labels = NULL,
  digits = 2,
  center_fun = mean,
  spread_fun = sd,
  group = NULL,
  var_types = NULL
)
}
\arguments{
\item{data}{Data frame or data table with variables of interest}

\item{vars}{Character vector of variable names, a data frame with 2 columns,
a nested list structure, or a YAML string/file:
\itemize{
\item Character vector: Simple list of variable names
\item Data frame: Column 1 = variable names, Column 2 = labels
\item Nested list: Structured format with subheaders and variable-level overrides.
See examples below.
}

Nested list format:
\preformatted{
  list(
    "Table Title" = list(
      "Subheader 1" = list(
        var1 = "Label 1",
        var2 = "Label 2",
        var3 = list(var = "var3", label = "Label 3", 
                   center_fun = median, spread_fun = IQR),
        var4 = list(var = "var4", label = "Label 4",
                   levels = list("Level 1" = "value1", "Level 2" = "value2"))
      ),
      "Subheader 2" = list(...)
    )
  )
  }

YAML format (recommended for readability):
\preformatted{
  "Table Title":
    "Subheader 1":
      var1: "Label 1"
      var2: "Label 2"
      var3:
        var: "var3"
        label: "Label 3"
        center_fun: "median"
        spread_fun: "IQR"
      var4:
        var: "var4"
        label: "Label 4"
        levels:
          "Level 1": "value1"
          "Level 2": "value2"
    "Subheader 2":
      var5: "Label 5"
  }

YAML can be provided as a string or file path. See \code{\link{parse_yaml_varlist}}
for details.}

\item{labels}{Optional named vector or data frame mapping variable names to labels.
If \code{vars} is a 2-column data frame, labels are taken from column 2.}

\item{digits}{Number of digits for continuous variables (default = 2)}

\item{center_fun}{Function for center statistic of continuous variables (default = \code{mean}).
Other options: \code{median}, or custom function.}

\item{spread_fun}{Function for spread statistic of continuous variables (default = \code{sd}).
Other options: \code{IQR} (for interquartile range), or custom function.}

\item{group}{Optional character string name of grouping variable for calculating
standardized mean differences (SMD) between two groups.}

\item{var_types}{Optional named character vector to override automatic type detection.
Values should be "continuous", "binary", or "categorical".}
}
\value{
Returns Table 1 as a data frame with columns:
\itemize{
\item varname: Variable name/label
\item statistic: Formatted statistic (Mean (SD) or \% (n))
\item n: Sample size
\item (if group specified): group1_stat, group2_stat, smd
}
}
\description{
Creates a Table 1 summary table that provides descriptive statistics
for variables in a data frame. Table 1 typically contains baseline
characteristics of study participants.
}
\details{
The function automatically detects variable types and formats them appropriately:
\itemize{
\item Continuous variables: Center (Spread) - default is Mean (SD)
\item Binary variables: \% (n)
\item Categorical variables: \% (n) for each level (auto-expanded or user-specified)
}

For categorical variables, you can specify which levels to include and their labels
using the \code{levels} parameter in nested list or YAML format. This eliminates the
need to manually create derived binary variables.

For factor variables specified without a \code{levels} specification, the function
automatically creates a subheader row with the variable label, followed by indented
rows for each factor level (indented with 2 spaces). This provides a clear hierarchical
structure in the table output.
}
\examples{
# Create test data
data <- data.frame(
  age = rnorm(100, 50, 10),
  sex = factor(rep(c("M", "F"), 50)),
  treated = rep(c(TRUE, FALSE), 50),
  score = runif(100, 0, 100)
)

# Simple usage with variable names
table1 <- make_table1(data, vars = c("age", "sex", "treated", "score"))
print(table1)

# With custom labels
varlist <- data.frame(
  var = c("age", "sex", "treated", "score"),
  label = c("Age (years)", "Sex", "Treated", "Score")
)
table1 <- make_table1(data, vars = varlist)

# With median and IQR instead of mean and SD
table1 <- make_table1(
  data, 
  vars = c("age", "score"),
  center_fun = median,
  spread_fun = IQR
)

# With grouping for SMD calculation
data$group <- rep(c("A", "B"), 50)
table1_smd <- make_table1(
  data,
  vars = c("age", "sex", "treated"),
  group = "group"
)

# Factor variables automatically create subheader + indented levels
data$race <- factor(rep(c("White", "Black", "Asian"), c(30, 20, 50)))
table1_factor <- make_table1(data, vars = c("age", "race"))
# Output: "race" as subheader, then "  White", "  Black", "  Asian" as indented rows

# With subheaders to group variables (data frame method)
varlist <- data.frame(
  var = c("**Demographics**", "age", "sex", "**Treatment**", "treated"),
  label = c("**Demographics**", "Age (years)", "Sex", "**Treatment**", "Treated")
)
table1 <- make_table1(data, vars = varlist)

# With nested list structure (recommended for complex tables)
varlist <- list(
  "Patient Characteristics" = list(
    "Demographics" = list(
      age = "Age (years)",
      sex = "Sex"
    ),
    "Treatment" = list(
      treated = "Treated",
      score = list(var = "score", label = "Score", 
                  center_fun = median, spread_fun = IQR)
    )
  )
)
table1 <- make_table1(data, vars = varlist)

# With YAML string (recommended for readability)
yaml_str <- "
Patient Characteristics:
  Demographics:
    age: Age (years)
    sex: Sex
  Treatment:
    treated: Treated
    score:
      var: score
      label: Score
      center_fun: median
      spread_fun: IQR
"
table1 <- make_table1(data, vars = yaml_str)

# With YAML file
# writeLines(yaml_str, "table1_spec.yaml")
# table1 <- make_table1(data, vars = "table1_spec.yaml")

}
